/* This file was generated by ODB, object-relational mapping (ORM)
 * compiler for C++.
 */

DROP TABLE IF EXISTS "view_employee" CASCADE;

DROP TABLE IF EXISTS "view_employer" CASCADE;

DROP TABLE IF EXISTS "view_country" CASCADE;

CREATE TABLE "view_country" (
  "code" TEXT NOT NULL PRIMARY KEY,
  "name" TEXT NOT NULL);

CREATE TABLE "view_employer" (
  "id" BIGINT NOT NULL PRIMARY KEY,
  "name" TEXT NOT NULL);

CREATE TABLE "view_employee" (
  "id" BIGINT NOT NULL PRIMARY KEY,
  "first" TEXT NOT NULL,
  "last" TEXT NOT NULL,
  "age" SMALLINT NOT NULL,
  "residence" TEXT NULL,
  "nationality" TEXT NULL,
  "employed_by" BIGINT NULL,
  CONSTRAINT "residence_fk"
    FOREIGN KEY ("residence")
    REFERENCES "view_country" ("code")
    INITIALLY DEFERRED,
  CONSTRAINT "nationality_fk"
    FOREIGN KEY ("nationality")
    REFERENCES "view_country" ("code")
    INITIALLY DEFERRED,
  CONSTRAINT "employed_by_fk"
    FOREIGN KEY ("employed_by")
    REFERENCES "view_employer" ("id")
    INITIALLY DEFERRED);

